# ì°¨ì›ìˆ ì‚¬ ë¦¬ì›Œí¬ ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”

**ì§ì—…ëª…**: ì°¨ì›ìˆ ì‚¬ (Dimensionist)
**ì•„í‚¤íƒ€ì…**: í”¼í•´ ì§€ì—° íƒ±ì»¤-ë”œëŸ¬ í•˜ì´ë¸Œë¦¬ë“œ
**í•µì‹¬ ì»¨ì…‰**: ì°¨ì› êµ´ì ˆì„ í†µí•œ í”¼í•´ ì§€ì—° ë° êµ´ì ˆëŸ‰ ê¸°ë°˜ ê³µê²©

### ì„¤ê³„ ì² í•™
- **í”¼í•´ ì§€ì—°**: ë°›ëŠ” HP í”¼í•´ë¥¼ 85% ê²½ê°í•˜ë˜, ê²½ê°ëŸ‰ë§Œí¼ ì°¨ì› êµ´ì ˆ ìŠ¤íƒ ì¶•ì 
- **ì§€ì—° í”¼í•´ ê´€ë¦¬**: ë§¤í„´ ì°¨ì› êµ´ì ˆì˜ 35%ë¥¼ HP ê³ ì • í”¼í•´ë¡œ ë°›ìŒ
- **êµ´ì ˆëŸ‰ í™œìš©**: ì°¨ì› êµ´ì ˆëŸ‰ì„ ì†Œëª¨í•˜ì—¬ ê°•ë ¥í•œ ìŠ¤í‚¬ ì‚¬ìš©
- **ìê°€ íšŒë³µ ì¤‘ì‹¬**: ì™¸ë¶€ íšŒë³µ 80% ê°ì†Œ, ë³¸ì¸ ìŠ¤í‚¬ íšŒë³µ 200% ì¦ê°€
- **ë¶ˆì‚¬ì˜ ëª¸**: HP 0ì´ ë˜ì–´ë„ í–‰ë™ ê°€ëŠ¥ (ë‹¤ë¥¸ ì•„êµ°ì´ ì‚´ì•„ìˆëŠ” ê²½ìš°)

---

## âš™ï¸ ì°¨ì› êµ´ì ˆ ê¸°ë¯¹ ì‹œìŠ¤í…œ

### ê¸°ë¯¹ íƒ€ì…
```yaml
gimmick:
  type: dimension_refraction  # ì°¨ì› êµ´ì ˆ
  name: ì°¨ì› êµ´ì ˆ
  description: ë°›ëŠ” HP í”¼í•´ë¥¼ 85% ê²½ê°í•˜ê³  ê²½ê°ëŸ‰ë§Œí¼ ìŠ¤íƒ ì¶•ì . ë§¤í„´ 35%ì”© ê°ì†Œí•˜ë©° ê°ì†ŒëŸ‰ë§Œí¼ HP ê³ ì • í”¼í•´
  damage_reduction: 0.85  # ë°›ëŠ” í”¼í•´ 85% ê²½ê°
  turn_decay_rate: 0.35   # ë§¤í„´ 35% ê°ì†Œ
  min_refraction: 0       # ìµœì†Œ êµ´ì ˆëŸ‰
  max_refraction: null    # ìµœëŒ€ êµ´ì ˆëŸ‰ ì œí•œ ì—†ìŒ
  start_refraction: 0     # ì‹œì‘ êµ´ì ˆëŸ‰
```

### ì‘ë™ ë©”ì»¤ë‹ˆì¦˜

#### 1. í”¼í•´ í¡ìˆ˜ ë° êµ´ì ˆëŸ‰ ì¶•ì 
- ì°¨ì›ìˆ ì‚¬ê°€ HP í”¼í•´ë¥¼ ë°›ì„ ë•Œ:
  ```python
  actual_damage = incoming_damage * 0.15  # ì‹¤ì œ ë°›ëŠ” í”¼í•´ 15%
  refraction_gain = incoming_damage * 0.85  # êµ´ì ˆëŸ‰ ì¦ê°€ 85%
  character.refraction_stacks += refraction_gain
  ```
- **ì˜ˆì‹œ**: 1000 HP í”¼í•´ â†’ 150 HPë§Œ ë°›ìŒ, 850 êµ´ì ˆëŸ‰ ì¶•ì 

#### 2. ë§¤í„´ êµ´ì ˆëŸ‰ ê°ì†Œ ë° ì§€ì—° í”¼í•´
- í„´ ì¢…ë£Œ ì‹œ:
  ```python
  decay_amount = character.refraction_stacks * 0.35
  character.refraction_stacks -= decay_amount
  character.take_fixed_damage(decay_amount)  # ê³ ì • í”¼í•´ë¡œ ë°›ìŒ
  ```
- **ì˜ˆì‹œ**: êµ´ì ˆëŸ‰ 1000 â†’ 350 ê°ì†Œ, 350 ê³ ì • HP í”¼í•´, ì”ì—¬ 650

#### 3. ìŠ¤í‚¬ì„ í†µí•œ êµ´ì ˆëŸ‰ ì†Œëª¨
- ì°¨ì› êµ´ì ˆëŸ‰ì„ ì†Œëª¨í•˜ì—¬ ê°•ë ¥í•œ ìŠ¤í‚¬ ì‚¬ìš©
- ì†Œëª¨ ë°©ì‹:
  - **ê³ ì •ê°’**: êµ´ì ˆëŸ‰ì˜ X% ì†Œëª¨ (ì˜ˆ: 25%, 75%)
  - **ìµœëŒ€ HP ë¹„ìœ¨**: ìµœëŒ€ HPì˜ X%ë§Œí¼ êµ´ì ˆëŸ‰ ì†Œëª¨

---

## ğŸ¯ ìŠ¤í‚¬ ì„¤ê³„ (10ê°œ)

### 1. êµ´ì ˆ íƒ€ê²© (ê¸°ë³¸ BRV)
- **íƒ€ì…**: BRV ê³µê²©
- **ì„¤ëª…**: ê¸°ë³¸ ë§ˆë²• BRV ê³µê²©, êµ´ì ˆëŸ‰ì˜ 2%ë§Œí¼ ì¶”ê°€ ë°ë¯¸ì§€
- **íš¨ê³¼**:
  - BRV ë°ë¯¸ì§€: ë°°ìœ¨ 1.5 (ë§ˆë²•)
  - ì¶”ê°€ ë°ë¯¸ì§€: êµ´ì ˆëŸ‰ Ã— 0.02
- **ë¹„ìš©**: ì—†ìŒ
- **ëŒ€ìƒ**: ë‹¨ì¼

### 2. êµ´ì ˆ ë°©ì¶œ (ê¸°ë³¸ HP)
- **íƒ€ì…**: HP ê³µê²©
- **ì„¤ëª…**: ê¸°ë³¸ HP ê³µê²©, êµ´ì ˆëŸ‰ì˜ 1%ë§Œí¼ ì¶”ê°€ ë°ë¯¸ì§€
- **íš¨ê³¼**:
  - HP ë°ë¯¸ì§€: ë°°ìœ¨ 1.2 (ë§ˆë²•)
  - ì¶”ê°€ ë°ë¯¸ì§€: êµ´ì ˆëŸ‰ Ã— 0.01
- **ë¹„ìš©**: ì—†ìŒ
- **ëŒ€ìƒ**: ë‹¨ì¼

### 3. ì°¨ì› íšŒê·€ (ìê°€ íšŒë³µ)
- **íƒ€ì…**: ì§€ì›
- **ì„¤ëª…**: êµ´ì ˆëŸ‰ì˜ 75%ë§Œí¼ HP íšŒë³µ ë° êµ´ì ˆëŸ‰ 75% ê°ì†Œ
- **íš¨ê³¼**:
  - HP íšŒë³µ: êµ´ì ˆëŸ‰ Ã— 0.75
  - êµ´ì ˆëŸ‰ ê°ì†Œ: 75%
  - ë³¸ì¸ ìŠ¤í‚¬ íšŒë³µ ë³´ë„ˆìŠ¤: 200% (íŠ¹ì„± ì ìš© ì‹œ)
- **ë¹„ìš©**: MP 8
- **ëŒ€ìƒ**: ìì‹ 
- **ì¿¨ë‹¤ìš´**: 3í„´

### 4. ì°¨ì› í­ë°œ (ì „ì²´ ê³ ì • í”¼í•´)
- **íƒ€ì…**: HP ê³µê²© (ê³ ì • í”¼í•´)
- **ì„¤ëª…**: êµ´ì ˆëŸ‰ì˜ 25%ë¥¼ ì†Œëª¨í•˜ì—¬ ì  ì „ì²´ì—ê²Œ ì†Œëª¨ëŸ‰ì˜ 2.5ë°° ê³ ì • í”¼í•´
- **íš¨ê³¼**:
  - êµ´ì ˆëŸ‰ ì†Œëª¨: 25%
  - ê³ ì • HP í”¼í•´: ì†Œëª¨ëŸ‰ Ã— 2.5 (ì  ì „ì²´)
- **ë¹„ìš©**: MP 10
- **ëŒ€ìƒ**: ì  ì „ì²´
- **ì¿¨ë‹¤ìš´**: 4í„´

### 5. êµ´ì ˆ ê°•í™” (ë²„í”„)
- **íƒ€ì…**: ì§€ì›
- **ì„¤ëª…**: ìµœëŒ€ HPì˜ 20%ë§Œí¼ êµ´ì ˆëŸ‰ ì†Œëª¨, ê³µê²©ë ¥/ë§ˆë²•ë ¥ +60% (3í„´)
- **íš¨ê³¼**:
  - êµ´ì ˆëŸ‰ ì†Œëª¨: ìµœëŒ€ HP Ã— 0.20
  - ê³µê²©ë ¥ +60% (3í„´)
  - ë§ˆë²•ë ¥ +60% (3í„´)
- **ë¹„ìš©**: MP 6
- **ëŒ€ìƒ**: ìì‹ 
- **ì¡°ê±´**: êµ´ì ˆëŸ‰ >= ìµœëŒ€ HPì˜ 20%

### 6. ì°¨ì› ë¶„ì‚° (AOE BRV+HP)
- **íƒ€ì…**: BRV+HP ê³µê²©
- **ì„¤ëª…**: êµ´ì ˆëŸ‰ì— ë¹„ë¡€í•œ ê°•ë ¥í•œ ì „ì²´ ê³µê²©
- **íš¨ê³¼**:
  - BRV ë°ë¯¸ì§€: ë°°ìœ¨ 2.0 (ë§ˆë²•)
  - HP ë°ë¯¸ì§€: ë°°ìœ¨ 1.8 (ë§ˆë²•)
  - ì¶”ê°€ ë°ë¯¸ì§€: êµ´ì ˆëŸ‰ Ã— 0.015
  - êµ´ì ˆëŸ‰ ì†Œëª¨: ìµœëŒ€ HP Ã— 0.15
- **ë¹„ìš©**: MP 12
- **ëŒ€ìƒ**: ì  ì „ì²´

### 7. êµ´ì ˆ ì „í™˜ (í”¼í•´â†’êµ´ì ˆ)
- **íƒ€ì…**: ì§€ì›
- **ì„¤ëª…**: ìµœëŒ€ HPì˜ 30%ë§Œí¼ ìí•´í•˜ì—¬ ë™ì¼ëŸ‰ì„ êµ´ì ˆëŸ‰ìœ¼ë¡œ ì „í™˜ (2ë°° íš¨ìœ¨)
- **íš¨ê³¼**:
  - ìí•´: ìµœëŒ€ HP Ã— 0.30
  - êµ´ì ˆëŸ‰ ì¦ê°€: ìí•´ëŸ‰ Ã— 2.0
- **ë¹„ìš©**: MP 5
- **ëŒ€ìƒ**: ìì‹ 

### 8. ì°¨ì› ë³´í˜¸ë§‰ (ì•„êµ° ë²„í”„)
- **íƒ€ì…**: ì§€ì›
- **ì„¤ëª…**: ìµœëŒ€ HPì˜ 25%ë§Œí¼ êµ´ì ˆëŸ‰ ì†Œëª¨, ì•„êµ° ì „ì²´ í”¼í•´ ê²½ê° +40% (2í„´)
- **íš¨ê³¼**:
  - êµ´ì ˆëŸ‰ ì†Œëª¨: ìµœëŒ€ HP Ã— 0.25
  - ì•„êµ° ì „ì²´ í”¼í•´ ê²½ê° +40% (2í„´)
  - ë°©ì–´ë ¥ +30% (2í„´)
- **ë¹„ìš©**: MP 10
- **ëŒ€ìƒ**: ì•„êµ° ì „ì²´
- **ì¡°ê±´**: êµ´ì ˆëŸ‰ >= ìµœëŒ€ HPì˜ 25%

### 9. ì°¨ì› ì—­ë¥˜ (ê³ ìœ„í—˜ ê³ ë³´ìƒ)
- **íƒ€ì…**: BRV+HP ê³µê²©
- **ì„¤ëª…**: êµ´ì ˆëŸ‰ì˜ 50%ë¥¼ ì¦‰ì‹œ HP ê³ ì • í”¼í•´ë¡œ ë°›ê³ , ê·¹ê°•ì˜ ë‹¨ì¼ ê³µê²©
- **íš¨ê³¼**:
  - ìí•´: êµ´ì ˆëŸ‰ Ã— 0.50 (ê³ ì • í”¼í•´)
  - BRV ë°ë¯¸ì§€: ë°°ìœ¨ 4.0 + êµ´ì ˆëŸ‰ Ã— 0.04 (ë§ˆë²•)
  - HP ë°ë¯¸ì§€: ë°°ìœ¨ 3.5 + êµ´ì ˆëŸ‰ Ã— 0.03 (ë§ˆë²•)
- **ë¹„ìš©**: MP 15
- **ëŒ€ìƒ**: ë‹¨ì¼
- **ì¿¨ë‹¤ìš´**: 5í„´

### 10. ê¶ê·¹ê¸°: ì°¨ì› ë¶•ê´´
- **íƒ€ì…**: ê¶ê·¹ê¸° (BRV+HP ì „ì²´ ê³µê²©)
- **ì„¤ëª…**: ëª¨ë“  êµ´ì ˆëŸ‰ì„ í•´ë°©í•˜ì—¬ ì°¨ì›ì„ ë¶•ê´´ì‹œí‚´
- **íš¨ê³¼**:
  - BRV ë°ë¯¸ì§€: ë°°ìœ¨ 5.0 + êµ´ì ˆëŸ‰ Ã— 0.05 (ë§ˆë²•)
  - HP ë°ë¯¸ì§€: ë°°ìœ¨ 4.5 + êµ´ì ˆëŸ‰ Ã— 0.04 (ë§ˆë²•)
  - ì  ì „ì²´ ë°©ì–´ë ¥ -50% (3í„´)
  - êµ´ì ˆëŸ‰ ì „ë¶€ ì†Œëª¨
  - ìì‹  HP íšŒë³µ: ì†Œëª¨í•œ êµ´ì ˆëŸ‰ Ã— 0.30
- **ë¹„ìš©**: MP 35
- **ëŒ€ìƒ**: ì  ì „ì²´
- **ì¿¨ë‹¤ìš´**: 15í„´

---

## ğŸŒŸ íŠ¹ì„± ì„¤ê³„ (5ê°œ)

### 1. ì°¨ì› ì•ˆì •í™” (Dimensional Stabilization)
- **ì„¤ëª…**: ì°¨ì› êµ´ì ˆë¡œ ì¸í•´ ë°›ëŠ” í”¼í•´ 50% â†’ 30% ê°ì†Œ
- **íš¨ê³¼**:
  - í”¼í•´ ê²½ê°: 85% â†’ 92.5% (ì‹¤ì œ ë°›ëŠ” í”¼í•´ 15% â†’ 7.5%)
  - ë§¤í„´ êµ´ì ˆ ê°ì†Œ: 35% â†’ 25%
- **íƒ€ì…**: íŒ¨ì‹œë¸Œ
- **ì ê¸ˆ í•´ì œ**: ë ˆë²¨ 5

### 2. ìê°€ ì¹˜ìœ  íŠ¹í™” (Self-Healing Mastery)
- **ì„¤ëª…**: ë³¸ì¸ ìŠ¤í‚¬ë¡œ íšŒë³µë˜ëŠ” ì–‘ 200% ì¦ê°€, ì™¸ë¶€ íšŒë³µ 80% ê°ì†Œ
- **íš¨ê³¼**:
  - ë³¸ì¸ ìŠ¤í‚¬ íšŒë³µ: Ã—3.0 (ê¸°ë³¸ Ã—1.0 + ë³´ë„ˆìŠ¤ Ã—2.0)
  - ì™¸ë¶€ íšŒë³µ (ì•„êµ°/í¬ì…˜): Ã—0.2
- **íƒ€ì…**: íŒ¨ì‹œë¸Œ
- **ì ê¸ˆ í•´ì œ**: ë ˆë²¨ 10

### 3. ê³ ì • í”¼í•´ ì¦í­ (Fixed Damage Amplification)
- **ì„¤ëª…**: ê³ ì • í”¼í•´ë¥¼ ì…íˆëŠ” ìŠ¤í‚¬ì˜ í”¼í•´ëŸ‰ +50%
- **íš¨ê³¼**:
  - ì°¨ì› í­ë°œ í”¼í•´: Ã—2.5 â†’ Ã—3.75
  - ì°¨ì› ì—­ë¥˜ í”¼í•´: Ã—1.0 â†’ Ã—1.5
  - ë§¤í„´ êµ´ì ˆ í”¼í•´: Ã—1.0 â†’ Ã—1.5 (ë³¸ì¸ì´ ë°›ëŠ” í”¼í•´ëŠ” ì œì™¸)
- **íƒ€ì…**: íŒ¨ì‹œë¸Œ
- **ì ê¸ˆ í•´ì œ**: ë ˆë²¨ 15

### 4. ì´ì¤‘ ì°¨ì› (Double Refraction)
- **ì„¤ëª…**: ë°›ëŠ” ëª¨ë“  í”¼í•´ 50% ì¶”ê°€ ê°ì†Œ, ì°¨ì› êµ´ì ˆë¡œ ì¸í•œ í”¼í•´ 75% ì¦ê°€
- **íš¨ê³¼**:
  - ëª¨ë“  í”¼í•´ ê°ì†Œ: -50% (ê³±ì—°ì‚°)
  - ë§¤í„´ êµ´ì ˆ í”¼í•´: Ã—1.75
  - ìµœì¢… ê³„ì‚°: `final_damage = incoming * 0.15 * 0.5 = incoming * 0.075` (7.5%ë§Œ ë°›ìŒ)
  - êµ´ì ˆëŸ‰ ì¶•ì : `incoming * 0.85` (ë³€ë™ ì—†ìŒ)
- **íƒ€ì…**: íŒ¨ì‹œë¸Œ
- **ì ê¸ˆ í•´ì œ**: ë ˆë²¨ 20
- **ë¦¬ìŠ¤í¬**: ë§¤í„´ êµ´ì ˆ í”¼í•´ê°€ í¬ê²Œ ì¦ê°€í•˜ë¯€ë¡œ íšŒë³µ ê´€ë¦¬ í•„ìˆ˜

### 5. ë¶ˆë©¸ì˜ ì¡´ì¬ (Undying Existence)
- **ì„¤ëª…**: HPê°€ 0ì´ ë˜ì–´ë„ í–‰ë™ ë° íšŒë³µ ê°€ëŠ¥. ë‹¤ë¥¸ ì•„êµ° ëª¨ë‘ ì‚¬ë§ ì‹œ ê²Œì„ ì˜¤ë²„
- **íš¨ê³¼**:
  - HP 0 ìƒíƒœì—ì„œë„ is_alive = True (ì¡°ê±´ë¶€)
  - í–‰ë™ ê°€ëŠ¥ (í„´ ì§„í–‰, ìŠ¤í‚¬ ì‚¬ìš©)
  - íšŒë³µ ê°€ëŠ¥ (ë³¸ì¸ ìŠ¤í‚¬, ì•„êµ° íšŒë³µ)
  - ì¡°ê±´: ìµœì†Œ 1ëª…ì˜ ì•„êµ°ì´ HP > 0
  - ì œì•½: ëª¨ë“  ì•„êµ° HP = 0 ì‹œ ê²Œì„ ì˜¤ë²„
- **íƒ€ì…**: íŠ¹ìˆ˜ íŒ¨ì‹œë¸Œ
- **ì ê¸ˆ í•´ì œ**: ë ˆë²¨ 25
- **UI í‘œì‹œ**: HP 0ì¼ ë•Œ "ì°¨ì› ì¡´ì¬" ìƒíƒœ í‘œì‹œ

---

## ğŸ“Š ìŠ¤íƒ¯ ì„¤ê³„

### ê¸°ë³¸ ìŠ¤íƒ¯
```yaml
base_stats:
  hp: 120          # ë†’ì€ HP (í”¼í•´ ì§€ì—° íƒ±ì»¤)
  mp: 85           # ì¤‘ê°„ MP
  init_brv: 80     # ë‚®ì€ ì´ˆê¸° BRV
  speed: 40        # ë‚®ì€ ì†ë„ (í”¼í•´ ì§€ì—° í˜ë„í‹°)
  physical_attack: 30   # ë‚®ì€ ë¬¼ë¦¬ ê³µê²©
  physical_defense: 85  # ë†’ì€ ë¬¼ë¦¬ ë°©ì–´
  magic_attack: 92      # ë†’ì€ ë§ˆë²• ê³µê²©
  magic_defense: 90     # ë†’ì€ ë§ˆë²• ë°©ì–´
  max_brv: 380     # ì¤‘ê°„ ìµœëŒ€ BRV
```

### ìŠ¤íƒ¯ ì„±ì¥
```yaml
stat_growth:
  hp: 12.0         # HP ì„±ì¥ ë†’ìŒ
  mp: 6.0
  init_brv: 16.0
  strength: 2.0
  defense: 4.5     # ë°©ì–´ ì„±ì¥ ë†’ìŒ
  magic: 5.0       # ë§ˆë²• ì„±ì¥ ë†’ìŒ
  spirit: 4.5      # ë§ˆë°© ì„±ì¥ ë†’ìŒ
  speed: 3.5
  luck: 4.0
  accuracy: 1.5
  evasion: 2.0
  max_brv: 76.0
```

---

## ğŸ› ï¸ êµ¬í˜„ í•„ìš” ì‚¬í•­

### 1. ê³ ì • í”¼í•´ íš¨ê³¼ (FixedDamageEffect)
**íŒŒì¼**: `src/character/skills/effects/fixed_damage_effect.py`

```python
class FixedDamageEffect(SkillEffect):
    """ê³ ì • í”¼í•´ íš¨ê³¼ (ë°©ì–´ë ¥ ë¬´ì‹œ)"""
    def __init__(self, base_damage=0, scaling_field=None, scaling_multiplier=1.0):
        super().__init__(EffectType.DAMAGE)
        self.base_damage = base_damage
        self.scaling_field = scaling_field  # ì˜ˆ: "refraction_stacks"
        self.scaling_multiplier = scaling_multiplier

    def execute(self, user, target, context):
        damage = self.base_damage

        # ìŠ¤ì¼€ì¼ë§ í•„ë“œê°€ ìˆìœ¼ë©´ ê³„ì‚°
        if self.scaling_field:
            stacks = getattr(user, self.scaling_field, 0)
            damage += int(stacks * self.scaling_multiplier)

        # ê³ ì • í”¼í•´ ì ìš© (ë°©ì–´ë ¥ ë¬´ì‹œ)
        target.take_fixed_damage(damage)

        return EffectResult(
            effect_type=EffectType.DAMAGE,
            success=True,
            hp_damage=damage,
            message=f"ê³ ì • í”¼í•´ {damage}!"
        )
```

### 2. ì°¨ì› êµ´ì ˆ ê¸°ë¯¹ ì—…ë°ì´íŠ¸
**íŒŒì¼**: `src/character/gimmick_updater.py`

```python
@staticmethod
def _update_dimension_refraction(character):
    """ì°¨ì›ìˆ ì‚¬: ì°¨ì› êµ´ì ˆ ì‹œìŠ¤í…œ ì—…ë°ì´íŠ¸"""
    refraction = getattr(character, 'refraction_stacks', 0)

    if refraction <= 0:
        return

    # ë§¤í„´ 35% ê°ì†Œ
    decay_rate = getattr(character, 'turn_decay_rate', 0.35)

    # ì´ì¤‘ ì°¨ì› íŠ¹ì„± í™•ì¸ (êµ´ì ˆ í”¼í•´ +75%)
    decay_damage_mult = 1.0
    if hasattr(character, 'active_traits'):
        if any((t if isinstance(t, str) else t.get('id')) == 'double_refraction'
               for t in character.active_traits):
            decay_damage_mult = 1.75

    # ê°ì†ŒëŸ‰ ê³„ì‚°
    decay_amount = int(refraction * decay_rate)

    # êµ´ì ˆëŸ‰ ê°ì†Œ
    character.refraction_stacks = max(0, refraction - decay_amount)

    # ê°ì†ŒëŸ‰ë§Œí¼ ê³ ì • HP í”¼í•´
    if decay_amount > 0:
        decay_damage = int(decay_amount * decay_damage_mult)

        # ê³ ì • í”¼í•´ ì¦í­ íŠ¹ì„± í™•ì¸ (ì œì™¸ - ë³¸ì¸ í”¼í•´ëŠ” ì¦í­ ì•ˆ í•¨)
        # (ì°¨ì› í­ë°œ ë“± ê³µê²© ìŠ¤í‚¬ë§Œ ì¦í­)

        character.take_fixed_damage(decay_damage)
        logger.warning(
            f"{character.name} ì°¨ì› êµ´ì ˆ í”¼í•´: {decay_damage} HP "
            f"(êµ´ì ˆëŸ‰ {refraction} â†’ {character.refraction_stacks})"
        )
```

### 3. í”¼í•´ í¡ìˆ˜ ë¡œì§
**íŒŒì¼**: `src/character/character.py` ë˜ëŠ” `src/combat/combat_manager.py`

```python
def take_damage(self, damage, damage_type="physical"):
    """í”¼í•´ ë°›ê¸° (ì°¨ì› êµ´ì ˆ ì²˜ë¦¬ í¬í•¨)"""

    # ì°¨ì›ìˆ ì‚¬ ì°¨ì› êµ´ì ˆ ì²´í¬
    if getattr(self, 'gimmick_type', None) == "dimension_refraction":
        # í”¼í•´ ê²½ê°ë¥  ê³„ì‚°
        reduction = getattr(self, 'damage_reduction', 0.85)

        # ì°¨ì› ì•ˆì •í™” íŠ¹ì„± í™•ì¸
        if hasattr(self, 'active_traits'):
            if any((t if isinstance(t, str) else t.get('id')) == 'dimensional_stabilization'
                   for t in self.active_traits):
                reduction = 0.925  # 92.5% ê²½ê°

        # ì´ì¤‘ ì°¨ì› íŠ¹ì„± í™•ì¸ (ì¶”ê°€ 50% ê²½ê°)
        double_refraction_mult = 1.0
        if hasattr(self, 'active_traits'):
            if any((t if isinstance(t, str) else t.get('id')) == 'double_refraction'
                   for t in self.active_traits):
                double_refraction_mult = 0.5

        # ê²½ê°ëŸ‰ ê³„ì‚°
        refracted_amount = int(damage * reduction)
        actual_damage = damage - refracted_amount

        # ì´ì¤‘ ì°¨ì› ì¶”ê°€ ê²½ê°
        actual_damage = int(actual_damage * double_refraction_mult)

        # êµ´ì ˆëŸ‰ ì¶•ì 
        if not hasattr(self, 'refraction_stacks'):
            self.refraction_stacks = 0
        self.refraction_stacks += refracted_amount

        logger.info(
            f"{self.name} ì°¨ì› êµ´ì ˆ ë°œë™! "
            f"í”¼í•´ {damage} â†’ {actual_damage} (êµ´ì ˆëŸ‰ +{refracted_amount})"
        )

        damage = actual_damage

    # ê¸°ì¡´ í”¼í•´ ì²˜ë¦¬ ë¡œì§
    self.current_hp -= damage
    ...
```

### 4. íŠ¹ìˆ˜ íšŒë³µ ë¡œì§
**íŒŒì¼**: `src/character/skills/effects/heal_effect.py`

```python
def execute(self, user, target, context):
    """íšŒë³µ ì‹¤í–‰ (ì°¨ì›ìˆ ì‚¬ íŠ¹ìˆ˜ ì²˜ë¦¬)"""

    # ê¸°ë³¸ íšŒë³µëŸ‰ ê³„ì‚°
    heal_amount = ...

    # ì°¨ì›ìˆ ì‚¬ íŠ¹ìˆ˜ íšŒë³µ ì²˜ë¦¬
    if getattr(target, 'gimmick_type', None) == "dimension_refraction":
        # ìê°€ ì¹˜ìœ  íŠ¹í™” íŠ¹ì„± í™•ì¸
        has_self_healing = any(
            (t if isinstance(t, str) else t.get('id')) == 'self_healing_mastery'
            for t in target.active_traits
        ) if hasattr(target, 'active_traits') else False

        if has_self_healing:
            # ë³¸ì¸ ìŠ¤í‚¬ì¸ì§€ í™•ì¸
            is_self_skill = (user == target)

            if is_self_skill:
                # ë³¸ì¸ ìŠ¤í‚¬: 200% ì¦ê°€ (Ã—3.0)
                heal_amount = int(heal_amount * 3.0)
                logger.info(f"[ìê°€ ì¹˜ìœ ] {target.name} íšŒë³µëŸ‰ 3ë°°: {heal_amount}")
            else:
                # ì™¸ë¶€ íšŒë³µ: 80% ê°ì†Œ (Ã—0.2)
                heal_amount = int(heal_amount * 0.2)
                logger.info(f"[ì™¸ë¶€ íšŒë³µ ì €í•­] {target.name} íšŒë³µëŸ‰ 80% ê°ì†Œ: {heal_amount}")

    # íšŒë³µ ì ìš©
    target.heal(heal_amount)
    ...
```

### 5. ì‚¬ë§ í›„ í–‰ë™ ë©”ì»¤ë‹ˆì¦˜
**íŒŒì¼**: `src/character/character.py`

```python
@property
def is_alive(self):
    """ìƒì¡´ ìƒíƒœ ì²´í¬ (ì°¨ì›ìˆ ì‚¬ íŠ¹ìˆ˜ ì²˜ë¦¬)"""

    # ì¼ë°˜ ìºë¦­í„°: HP > 0
    if self.current_hp > 0:
        return True

    # ì°¨ì›ìˆ ì‚¬ ë¶ˆë©¸ì˜ ì¡´ì¬ íŠ¹ì„±
    if getattr(self, 'gimmick_type', None) == "dimension_refraction":
        has_undying = any(
            (t if isinstance(t, str) else t.get('id')) == 'undying_existence'
            for t in self.active_traits
        ) if hasattr(self, 'active_traits') else False

        if has_undying and self.current_hp <= 0:
            # ë‹¤ë¥¸ ì•„êµ°ì´ ì‚´ì•„ìˆëŠ”ì§€ í™•ì¸
            if hasattr(self, '_combat_manager') and self._combat_manager:
                allies = self._combat_manager.allies
                other_allies_alive = any(
                    ally != self and ally.current_hp > 0
                    for ally in allies
                )

                if other_allies_alive:
                    # ë‹¤ë¥¸ ì•„êµ°ì´ ì‚´ì•„ìˆìœ¼ë©´ HP 0ì—ë„ í–‰ë™ ê°€ëŠ¥
                    logger.info(f"{self.name} [ì°¨ì› ì¡´ì¬] ìƒíƒœ! HP 0ì´ì§€ë§Œ í–‰ë™ ê°€ëŠ¥")
                    return True

    return False
```

---

## ğŸ® í”Œë ˆì´ ìŠ¤íƒ€ì¼

### ì „íˆ¬ ì´ˆë°˜
1. **êµ´ì ˆëŸ‰ ì¶•ì **: ì ì˜ ê³µê²©ì„ ë°›ì•„ ì°¨ì› êµ´ì ˆ ì¶•ì 
2. **ë²„í”„ ì‚¬ìš©**: êµ´ì ˆ ê°•í™”ë¡œ ê³µê²©ë ¥/ë§ˆë²•ë ¥ ë²„í”„
3. **ì§€ì—° í”¼í•´ ê´€ë¦¬**: ë§¤í„´ ë°›ëŠ” êµ´ì ˆ í”¼í•´ë¥¼ ì°¨ì› íšŒê·€ë¡œ íšŒë³µ

### ì „íˆ¬ ì¤‘ë°˜
1. **êµ´ì ˆëŸ‰ í™œìš©**: ì°¨ì› ë¶„ì‚°, ì°¨ì› í­ë°œë¡œ ê´‘ì—­ í”¼í•´
2. **íšŒë³µ ì‚¬ì´í´**: ì°¨ì› íšŒê·€ë¥¼ í†µí•œ ìê°€ íšŒë³µ
3. **ì•„êµ° ì§€ì›**: ì°¨ì› ë³´í˜¸ë§‰ìœ¼ë¡œ ì•„êµ° ë³´í˜¸

### ì „íˆ¬ í›„ë°˜
1. **ì—­ë¥˜ í™œìš©**: ì°¨ì› ì—­ë¥˜ë¡œ ê³ ìœ„í—˜ ê³ ë³´ìƒ í”Œë ˆì´
2. **ê¶ê·¹ê¸°**: ì°¨ì› ë¶•ê´´ë¡œ ëª¨ë“  êµ´ì ˆëŸ‰ í•´ë°©
3. **ë¶ˆë©¸ ì „ëµ**: HP 0 ìƒíƒœì—ì„œë„ íšŒë³µí•˜ë©° ì „íˆ¬ ì§€ì†

---

## âš–ï¸ ë°¸ëŸ°ìŠ¤ ê³ ë ¤ì‚¬í•­

### ì¥ì 
- âœ… ê·¹ê°•ì˜ ìƒì¡´ë ¥ (85% í”¼í•´ ê²½ê° + ë¶ˆë©¸)
- âœ… êµ´ì ˆëŸ‰ ê¸°ë°˜ í­ë”œ ê°€ëŠ¥
- âœ… ìê°€ íšŒë³µ ëŠ¥ë ¥ (ì™¸ë¶€ íšŒë³µ ë¶ˆí•„ìš”)

### ë‹¨ì 
- âŒ ë§¤í„´ ì§€ì—° í”¼í•´ë¡œ ì§€ì†ì ì¸ HP ì†ì‹¤
- âŒ ì™¸ë¶€ íšŒë³µ íš¨ìœ¨ ë§¤ìš° ë‚®ìŒ (ì•„êµ° íëŸ¬ ì˜ì¡´ë„ ë‚®ìŒ = íŒ€ ì‹œë„ˆì§€ ì•½í•¨)
- âŒ ë‚®ì€ ì†ë„ë¡œ í–‰ë™ ìˆœì„œ ë¶ˆë¦¬
- âŒ êµ´ì ˆëŸ‰ ê´€ë¦¬ ì‹¤íŒ¨ ì‹œ ê¸‰ì‚¬ ê°€ëŠ¥

### ì¹´ìš´í„°
- ê³ ì • í”¼í•´ (ì°¨ì› êµ´ì ˆ ë¬´ì‹œ)
- ì§€ì† í”¼í•´ (ë§¤í„´ ì¶”ê°€ í”¼í•´)
- íšŒë³µ ì°¨ë‹¨ (ìê°€ íšŒë³µ ë´‰ì‡„)

---

## ğŸ“ ê°œë°œ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì½”ë“œ êµ¬í˜„
- [ ] `FixedDamageEffect` í´ë˜ìŠ¤ ì‘ì„±
- [ ] `gimmick_updater.py`ì— `dimension_refraction` ì¶”ê°€
- [ ] `Character.take_damage()` ì°¨ì› êµ´ì ˆ ë¡œì§ ì¶”ê°€
- [ ] `HealEffect` ì°¨ì›ìˆ ì‚¬ íšŒë³µ ë¡œì§ ì¶”ê°€
- [ ] `Character.is_alive` ë¶ˆë©¸ íŠ¹ì„± ì¶”ê°€

### ë°ì´í„° íŒŒì¼
- [ ] `dimensionist.yaml` ë¦¬ì›Œí¬
- [ ] `dimensionist_skills.py` 10ê°œ ìŠ¤í‚¬ ì‘ì„±
- [ ] ìŠ¤í‚¬ ë©”íƒ€ë°ì´í„° ì¶”ê°€

### í…ŒìŠ¤íŠ¸
- [ ] ì°¨ì› êµ´ì ˆ í”¼í•´ ê²½ê° í…ŒìŠ¤íŠ¸
- [ ] ë§¤í„´ êµ´ì ˆ í”¼í•´ í…ŒìŠ¤íŠ¸
- [ ] ìŠ¤í‚¬ë³„ êµ´ì ˆëŸ‰ ì†Œëª¨/íšŒë³µ í…ŒìŠ¤íŠ¸
- [ ] ë¶ˆë©¸ íŠ¹ì„± í…ŒìŠ¤íŠ¸
- [ ] ìê°€ íšŒë³µ ë³´ë„ˆìŠ¤ í…ŒìŠ¤íŠ¸

### UI
- [ ] ì°¨ì› êµ´ì ˆ ê²Œì´ì§€ í‘œì‹œ
- [ ] ë§¤í„´ êµ´ì ˆ í”¼í•´ ë¡œê·¸ í‘œì‹œ
- [ ] "ì°¨ì› ì¡´ì¬" ìƒíƒœ í‘œì‹œ (HP 0ì¼ ë•Œ)

---

## ğŸ”® í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±

### ì¶”ê°€ íŠ¹ì„± ì•„ì´ë””ì–´
- **ì°¨ì› ë¶•ê´´ ì €í•­**: êµ´ì ˆëŸ‰ì´ ìµœëŒ€ HPì˜ 300% ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ 50% í•´ì†Œ
- **ë‹¤ì°¨ì› ì¡´ì¬**: HP 0 ìƒíƒœì—ì„œë„ ê³µê²©ë ¥ +100%, ë°›ëŠ” í”¼í•´ -50%
- **ì‹œê³µê°„ ì™œê³¡**: êµ´ì ˆëŸ‰ 1000+ ì‹œ íšŒí”¼ìœ¨ +50%, í¬ë¦¬í‹°ì»¬ìœ¨ +30%

### ì¶”ê°€ ìŠ¤í‚¬ ì•„ì´ë””ì–´
- **ì°¨ì› ì´ë™**: êµ´ì ˆëŸ‰ ì†Œëª¨ë¡œ ì•„êµ°ê³¼ ìœ„ì¹˜ êµì²´ (íƒ±í‚¹)
- **êµ´ì ˆ í­ì£¼**: êµ´ì ˆëŸ‰ì„ 2ë°°ë¡œ ì¦í­ (3í„´ í›„ í­ë°œ)
- **ì°¨ì› ë³µì œ**: ìì‹ ì˜ ë¶„ì‹  ìƒì„± (êµ´ì ˆëŸ‰ ê³µìœ )

---

## ğŸ“š ì°¸ê³  ìë£Œ

- **ê¸°ì¡´ ì°¨ì›ìˆ ì‚¬**: `data/characters/dimensionist.yaml`
- **ê¸°ì¡´ ìŠ¤í‚¬**: `src/character/skills/job_skills/dimensionist_skills.py`
- **ê¸°ë¯¹ ì‹œìŠ¤í…œ**: `src/character/gimmick_updater.py`
- **í”¼í•´ ì‹œìŠ¤í…œ**: `src/combat/damage_calculator.py`

---

**ì‘ì„±ì¼**: 2025-11-27
**ë²„ì „**: 1.0
**ìƒíƒœ**: ì„¤ê³„ ì™„ë£Œ, êµ¬í˜„ ëŒ€ê¸°
