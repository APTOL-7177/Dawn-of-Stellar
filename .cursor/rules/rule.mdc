---
alwaysApply: false
---
# GEMINI.md - Dawn of Stellar

This document provides a comprehensive overview of the "Dawn of Stellar" project, designed to serve as a quick-start guide and contextual reference for development.

## Project Overview

**Dawn of Stellar** is a sophisticated, single-player roguelike RPG developed in Python, using the `tcod` library for its terminal-based interface. The game draws heavy inspiration from the Final Fantasy series, incorporating a unique hybrid combat system that combines Active Time Battle (ATB) and a Brave (BRV) mechanic.

The project is architected with a strong emphasis on modularity and scalability, utilizing an event-driven design to decouple its various systems. Game data, including 33 character classes, skills, and items, is managed through human-readable `YAML` files, making content updates straightforward.

### Key Features:
- **Hybrid Combat System:** A unique blend of real-time ATB gauges and the BRV/HP damage system.
- **Rich Content:** 33 unique character classes, each with distinct "gimmick" mechanics, and over 195 skills.
- **Procedural Generation:** Dungeons are procedurally generated using Binary Space Partitioning (BSP).
- **Data-Driven Design:** Character classes, skills, and other game data are defined in `YAML` files in the `/data` directory.
- **Event-Driven Architecture:** Core systems (Combat, World, Character, UI) communicate through a central `EventBus`, promoting loose coupling.
- **Comprehensive Test Suite:** The project uses `pytest` for unit and integration testing, with a focus on testable design.

## Development Environment

The project is built with Python 3.10+ and managed using `pyproject.toml`.

### Setup
1.  **Clone the repository:**
    ```bash
    git clone https://github.com/APTOL-7177/Dawn-of-Stellar.git
    cd Dawn-of-Stellar
    ```
2.  **Install dependencies:**
    It is recommended to use a virtual environment.
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Windows: .venv\Scripts\activate
    pip install -r requirements.txt
    ```

### Running the Game
The main entry point is `main.py`.

-   **Standard Mode:**
    ```bash
    python main.py
    ```
-   **Development Mode (all classes unlocked):**
    ```bash
    python main.py --dev
    ```
-   **Debug Mode (verbose logging):**
    ```bash
    python main.py --debug --log=DEBUG
    ```

### Building the Project
The project uses `PyInstaller` to create a standalone executable.
```bash
pyinstaller DawnOfStellar.spec
```

## Code Quality and Testing

The project enforces a high standard of code quality using a suite of tools.

### Running Tests
Tests are located in the `/tests` directory and are run using `pytest`.
-   **Run all tests:**
    ```bash
    pytest
    ```
-   **Run tests with coverage:**
    ```bash
    pytest --cov=src
    ```

### Linting and Formatting
-   **Black (Code Formatter):**
    ```bash
    black src/ tests/
    ```
-   **isort (Import Sorter):**
    ```bash
    isort src/ tests/
    ```
-   **Pylint (Linter):**
    ```bash
    pylint src/
    ```
-   **MyPy (Static Type Checker):**
    ```bash
    mypy src/
    ```
Configuration for these tools can be found in `pyproject.toml`.

## Project Structure

The project follows a clear, modular structure within the `src/` directory.

```
src/
├── ai/          # AI logic for enemies and companions
├── character/   # Character classes, skills, and stats
├── combat/      # Core combat mechanics (ATB, BRV, damage)
├── core/        # Foundational systems (Engine, EventBus, Config)
├── equipment/   # Item and inventory management
├── persistence/ # Save/load game state
├── ui/          # User interface components and rendering
└── world/       # Dungeon generation and exploration
```

-   **`main.py`**: The main application entry point.
-   **`data/`**: Contains all game data in `YAML` format (characters, skills, etc.).
-   **`tests/`**: Unit and integration tests.
-   **`docs/`**: Project design and architecture documentation.
-   **`pyproject.toml`**: Project metadata, dependencies, and tool configurations.
-   **`requirements.txt`**: List of Python dependencies.

## Key Architectural Concepts

-   **EventBus (`src/core/event_bus.py`):** A central pub-sub system that allows different parts of the game to communicate without being directly coupled. For example, when a character's HP changes, it publishes a `character.hp_change` event, which the UI system subscribes to in order to update the health bar.
-   **Data-Driven Content:** New character classes or skills can be added by creating new `YAML` files in the `data/` directory and implementing their unique logic, often without changing the core engine code.
-   **Service Registry (`src/core/registry.py`):** A simple Dependency Injection (DI) container to manage and access singleton services like managers and systems.
-   **State Management:** The game state is managed through various systems (e.g., `ExplorationSystem`, `CombatManager`) which are instantiated and controlled by the main game loop in `main.py`.

